<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-original-text="Support & Help - MDC TTS">الدعم والمساعدة - نظام تتبع المعاملات</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Cairo:wght@400;600;700&family=Noto+Sans+Arabic:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/responsive.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container-fluid px-4">
            <div class="d-flex justify-content-between align-items-center">
                <!-- Left Section -->
                <div class="d-flex align-items-center gap-3">
                    <button class="btn btn-link text-dark p-0 d-lg-none" id="sidebarToggle">
                        <i class="bi bi-list fs-4"></i>
                    </button>
                    <div class="logo">
                        <img src="MDC-logo-Black.png" alt="MDC Logo" height="40">
                    </div>
                    <h1 class="h5 mb-0 text-muted d-none d-md-block" data-original-text="Transaction Tracking System">نظام تتبع المعاملات</h1>
                </div>
                
                <!-- Right Section -->
                <div class="d-flex align-items-center gap-3">
                    <!-- Search -->
                    <div class="search-box d-none d-md-block">
                        <div class="input-group">
                            <span class="input-group-text bg-transparent border-0">
                                <i class="bi bi-search text-muted"></i>
                            </span>
                            <input type="text" class="form-control border-0 bg-transparent" placeholder="Search help articles..." data-original-placeholder="Search help articles...">
                        </div>
                    </div>
                    
                    <!-- Notifications -->
                    <button class="btn btn-link text-dark p-2 position-relative">
                        <i class="bi bi-bell fs-5"></i>
                        <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                            2
                        </span>
                    </button>
                    
                    <!-- Language Toggle -->
                    <div class="language-toggle">
                        <button class="btn btn-sm btn-outline-secondary" data-lang="en">EN</button>
                        <button class="btn btn-sm btn-outline-secondary active" data-lang="ar">AR</button>
                    </div>
                    
                    <!-- User Menu -->
                    <div class="dropdown">
                        <button class="btn btn-link text-dark p-0 d-flex align-items-center gap-2" data-bs-toggle="dropdown">
                            <div class="user-avatar">
                                <i class="bi bi-person-circle fs-3"></i>
                            </div>
                            <div class="text-start d-none d-lg-block">
                                <div class="fw-semibold" data-original-text="Ahmed Al-Rashid">أحمد الراشد</div>
                                <small class="text-muted" data-original-text="Client">عميل</small>
                            </div>
                            <i class="bi bi-chevron-down"></i>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="#"><i class="bi bi-person me-2"></i> <span data-original-text="Profile">الملف الشخصي</span></a></li>
                            <li><a class="dropdown-item" href="#"><i class="bi bi-gear me-2"></i> <span data-original-text="Settings">الإعدادات</span></a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item text-danger" href="index.html"><i class="bi bi-box-arrow-right me-2"></i> <span data-original-text="Logout">تسجيل الخروج</span></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="layout-wrapper">
        <!-- Sidebar will be inserted here by sidebar.js -->
        <div id="sidebar-container"></div>

        <!-- Main Content -->
        <main class="main-content">
            <div class="container-fluid p-4">
                <!-- Hero Section -->
                <div class="card mb-4 bg-primary text-white">
                    <div class="card-body text-center py-5">
                        <i class="bi bi-headset mb-3" style="font-size: 3rem;"></i>
                        <h1 class="card-title mb-3" data-original-text="How can we help you?">كيف يمكننا مساعدتك؟</h1>
                        <p class="card-text mb-4" data-original-text="Search our knowledge base or contact our support team">ابحث في قاعدة المعرفة أو تواصل مع فريق الدعم</p>
                        <div class="search-hero mx-auto" style="max-width: 500px;">
                            <div class="input-group input-group-lg">
                                <span class="input-group-text bg-white border-0">
                                    <i class="bi bi-search text-muted"></i>
                                </span>
                                <input type="text" class="form-control border-0" placeholder="Search for help..." data-original-placeholder="Search for help...">
                                <button class="btn btn-outline-light" type="button" data-original-text="Search">بحث</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Links -->
                <div class="row g-4 mb-5">
                    <div class="col-12 col-md-6 col-lg-3">
                        <div class="card h-100 text-center">
                            <div class="card-body">
                                <i class="bi bi-question-circle text-primary mb-3" style="font-size: 2.5rem;"></i>
                                <h5 class="card-title" data-original-text="Getting Started">البدء</h5>
                                <p class="card-text text-muted" data-original-text="Learn the basics of using our system">تعلم أساسيات استخدام النظام</p>
                                <a href="#getting-started" class="btn btn-outline-primary" data-original-text="Learn More">اعرف أكثر</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-6 col-lg-3">
                        <div class="card h-100 text-center">
                            <div class="card-body">
                                <i class="bi bi-receipt text-success mb-3" style="font-size: 2.5rem;"></i>
                                <h5 class="card-title" data-original-text="Transaction Help">مساعدة المعاملات</h5>
                                <p class="card-text text-muted" data-original-text="Get help with your transactions">احصل على المساعدة في معاملاتك</p>
                                <a href="#transactions" class="btn btn-outline-success" data-original-text="View Guide">عرض الدليل</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-6 col-lg-3">
                        <div class="card h-100 text-center">
                            <div class="card-body">
                                <i class="bi bi-file-earmark text-warning mb-3" style="font-size: 2.5rem;"></i>
                                <h5 class="card-title" data-original-text="Document Management">إدارة المستندات</h5>
                                <p class="card-text text-muted" data-original-text="Upload and manage your documents">رفع وإدارة مستنداتك</p>
                                <a href="#documents" class="btn btn-outline-warning" data-original-text="Get Help">احصل على المساعدة</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-6 col-lg-3">
                        <div class="card h-100 text-center">
                            <div class="card-body">
                                <i class="bi bi-chat-dots text-info mb-3" style="font-size: 2.5rem;"></i>
                                <h5 class="card-title" data-original-text="Contact Support">تواصل مع الدعم</h5>
                                <p class="card-text text-muted" data-original-text="Get in touch with our support team">تواصل مع فريق الدعم</p>
                                <a href="#contact" class="btn btn-outline-info" data-original-text="Contact Us">تواصل معنا</a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Main Content Row -->
                <div class="row g-4">
                    <!-- Left Column - FAQ & Support Tickets -->
                    <div class="col-12 col-lg-8">
                        <!-- Frequently Asked Questions -->
                        <div class="card mb-4">
                            <div class="card-header">
                                <h5 class="card-title mb-0" data-original-text="Frequently Asked Questions">الأسئلة الشائعة</h5>
                            </div>
                            <div class="card-body">
                                <div class="accordion" id="faqAccordion">
                                    <!-- Account & Login -->
                                    <div class="accordion-item">
                                        <h2 class="accordion-header" id="accountHeading">
                                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#accountCollapse" aria-expanded="false" aria-controls="accountCollapse">
                                                <i class="bi bi-person-circle me-2"></i>
                                                <span data-original-text="Account & Login">الحساب وتسجيل الدخول</span>
                                            </button>
                                        </h2>
                                        <div id="accountCollapse" class="accordion-collapse collapse" aria-labelledby="accountHeading" data-bs-parent="#faqAccordion">
                                            <div class="accordion-body">
                                                <div class="mb-3">
                                                    <strong data-original-text="How do I reset my password?">كيف يمكنني إعادة تعيين كلمة المرور؟</strong>
                                                    <p class="text-muted mb-0" data-original-text="Click on the 'Forgot Password' link on the login page and follow the instructions sent to your email.">انقر على رابط 'نسيت كلمة المرور' في صفحة تسجيل الدخول واتبع التعليمات المرسلة إلى بريدك الإلكتروني.</p>
                                                </div>
                                                <div class="mb-3">
                                                    <strong data-original-text="How do I update my profile information?">كيف يمكنني تحديث معلومات ملفي الشخصي؟</strong>
                                                    <p class="text-muted mb-0" data-original-text="Go to Settings > Profile and update your information. Changes will be saved automatically.">انتقل إلى الإعدادات > الملف الشخصي وحدث معلوماتك. سيتم حفظ التغييرات تلقائياً.</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Transactions -->
                                    <div class="accordion-item">
                                        <h2 class="accordion-header" id="transactionsHeading">
                                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#transactionsCollapse" aria-expanded="false" aria-controls="transactionsCollapse">
                                                <i class="bi bi-receipt me-2"></i>
                                                <span data-original-text="Transactions">المعاملات</span>
                                            </button>
                                        </h2>
                                        <div id="transactionsCollapse" class="accordion-collapse collapse" aria-labelledby="transactionsHeading" data-bs-parent="#faqAccordion">
                                            <div class="accordion-body">
                                                <div class="mb-3">
                                                    <strong data-original-text="How do I track my transaction status?">كيف يمكنني تتبع حالة معاملتي؟</strong>
                                                    <p class="text-muted mb-0" data-original-text="Go to 'My Transactions' to view all your transactions and their current status. You can also set up notifications for status updates.">انتقل إلى 'معاملاتي' لعرض جميع معاملاتك وحالتها الحالية. يمكنك أيضاً إعداد إشعارات لتحديثات الحالة.</p>
                                                </div>
                                                <div class="mb-3">
                                                    <strong data-original-text="What do the different status colors mean?">ما معنى ألوان الحالة المختلفة؟</strong>
                                                    <p class="text-muted mb-0" data-original-text="Green = Completed, Blue = In Progress, Yellow = Pending, Red = Requires Attention.">أخضر = مكتمل، أزرق = قيد التنفيذ، أصفر = معلق، أحمر = يتطلب اهتماماً.</p>
                                                </div>
                                                <div class="mb-3">
                                                    <strong data-original-text="How long does processing usually take?">كم يستغرق المعالجة عادة؟</strong>
                                                    <p class="text-muted mb-0" data-original-text="Processing times vary by transaction type. Most transactions are completed within 3-5 business days.">تختلف أوقات المعالجة حسب نوع المعاملة. معظم المعاملات تكتمل خلال 3-5 أيام عمل.</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Documents -->
                                    <div class="accordion-item">
                                        <h2 class="accordion-header" id="documentsHeading">
                                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#documentsCollapse" aria-expanded="false" aria-controls="documentsCollapse">
                                                <i class="bi bi-file-earmark me-2"></i>
                                                <span data-original-text="Documents">المستندات</span>
                                            </button>
                                        </h2>
                                        <div id="documentsCollapse" class="accordion-collapse collapse" aria-labelledby="documentsHeading" data-bs-parent="#faqAccordion">
                                            <div class="accordion-body">
                                                <div class="mb-3">
                                                    <strong data-original-text="What file formats are supported?">ما هي تنسيقات الملفات المدعومة؟</strong>
                                                    <p class="text-muted mb-0" data-original-text="We support PDF, DOC/DOCX, XLS/XLSX, JPG, PNG, and ZIP files up to 25MB each.">ندعم ملفات PDF و DOC/DOCX و XLS/XLSX و JPG و PNG و ZIP حتى 25 ميجابايت لكل ملف.</p>
                                                </div>
                                                <div class="mb-3">
                                                    <strong data-original-text="How do I organize my documents?">كيف يمكنني تنظيم مستنداتي؟</strong>
                                                    <p class="text-muted mb-0" data-original-text="Documents are automatically organized by transaction. You can also use the filter and search options to find specific documents.">يتم تنظيم المستندات تلقائياً حسب المعاملة. يمكنك أيضاً استخدام خيارات التصفية والبحث للعثور على مستندات محددة.</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Technical Issues -->
                                    <div class="accordion-item">
                                        <h2 class="accordion-header" id="technicalHeading">
                                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#technicalCollapse" aria-expanded="false" aria-controls="technicalCollapse">
                                                <i class="bi bi-gear me-2"></i>
                                                <span data-original-text="Technical Issues">المشاكل الفنية</span>
                                            </button>
                                        </h2>
                                        <div id="technicalCollapse" class="accordion-collapse collapse" aria-labelledby="technicalHeading" data-bs-parent="#faqAccordion">
                                            <div class="accordion-body">
                                                <div class="mb-3">
                                                    <strong data-original-text="The page is loading slowly, what should I do?">الصفحة تحمل ببطء، ماذا أفعل؟</strong>
                                                    <p class="text-muted mb-0" data-original-text="Try refreshing the page, clearing your browser cache, or check your internet connection. If the issue persists, contact support.">حاول تحديث الصفحة أو مسح ذاكرة التخزين المؤقت للمتصفح أو تحقق من اتصال الإنترنت. إذا استمرت المشكلة، تواصل مع الدعم.</p>
                                                </div>
                                                <div class="mb-3">
                                                    <strong data-original-text="Which browsers are supported?">ما هي المتصفحات المدعومة؟</strong>
                                                    <p class="text-muted mb-0" data-original-text="We support the latest versions of Chrome, Firefox, Safari, and Edge. Internet Explorer is not supported.">ندعم الإصدارات الحديثة من Chrome و Firefox و Safari و Edge. لا ندعم Internet Explorer.</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Support Tickets -->
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h5 class="card-title mb-0" data-original-text="My Support Tickets">تذاكر الدعم الخاصة بي</h5>
                                <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#newTicketModal">
                                    <i class="bi bi-plus me-1"></i>
                                    <span data-original-text="New Ticket">تذكرة جديدة</span>
                                </button>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th data-original-text="Ticket ID">رقم التذكرة</th>
                                                <th data-original-text="Subject">الموضوع</th>
                                                <th data-original-text="Status">الحالة</th>
                                                <th data-original-text="Priority">الأولوية</th>
                                                <th data-original-text="Created">تم إنشاؤها</th>
                                                <th data-original-text="Actions">الإجراءات</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><strong>#SP-001</strong></td>
                                                <td data-original-text="Unable to upload documents">غير قادر على رفع المستندات</td>
                                                <td><span class="badge bg-warning" data-original-text="In Progress">قيد المعالجة</span></td>
                                                <td><span class="badge bg-info" data-original-text="Medium">متوسط</span></td>
                                                <td>Jan 15, 2024</td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#ticketModal" data-original-text="View">عرض</button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td><strong>#SP-002</strong></td>
                                                <td data-original-text="Transaction status not updating">حالة المعاملة لا تتحدث</td>
                                                <td><span class="badge bg-success" data-original-text="Resolved">تم الحل</span></td>
                                                <td><span class="badge bg-warning" data-original-text="High">عالي</span></td>
                                                <td>Jan 12, 2024</td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#ticketModal" data-original-text="View">عرض</button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td><strong>#SP-003</strong></td>
                                                <td data-original-text="Need help with new transaction">بحاجة لمساعدة مع معاملة جديدة</td>
                                                <td><span class="badge bg-secondary" data-original-text="Closed">مغلق</span></td>
                                                <td><span class="badge bg-success" data-original-text="Low">منخفض</span></td>
                                                <td>Jan 10, 2024</td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#ticketModal" data-original-text="View">عرض</button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right Column - Contact Info & Resources -->
                    <div class="col-12 col-lg-4">
                        <!-- Contact Information -->
                        <div class="card mb-4">
                            <div class="card-header">
                                <h5 class="card-title mb-0" data-original-text="Contact Information">معلومات الاتصال</h5>
                            </div>
                            <div class="card-body">
                                <div class="contact-info">
                                    <div class="d-flex align-items-start mb-3">
                                        <i class="bi bi-telephone text-primary me-3 mt-1"></i>
                                        <div>
                                            <h6 class="mb-1" data-original-text="Phone Support">دعم هاتفي</h6>
                                            <p class="text-muted mb-0">+966 11 123 4567</p>
                                            <small class="text-muted" data-original-text="Sun-Thu 8AM-6PM">الأحد-الخميس 8ص-6م</small>
                                        </div>
                                    </div>
                                    <div class="d-flex align-items-start mb-3">
                                        <i class="bi bi-envelope text-success me-3 mt-1"></i>
                                        <div>
                                            <h6 class="mb-1" data-original-text="Email Support">دعم بالبريد الإلكتروني</h6>
                                            <p class="text-muted mb-0">support@mdc.gov.sa</p>
                                            <small class="text-muted" data-original-text="Response within 24 hours">رد خلال 24 ساعة</small>
                                        </div>
                                    </div>
                                    <div class="d-flex align-items-start mb-3">
                                        <i class="bi bi-geo-alt text-info me-3 mt-1"></i>
                                        <div>
                                            <h6 class="mb-1" data-original-text="Office Location">موقع المكتب</h6>
                                            <p class="text-muted mb-0" data-original-text="King Fahd Road, Riyadh">طريق الملك فهد، الرياض</p>
                                            <small class="text-muted" data-original-text="Visit by appointment">زيارة بموعد مسبق</small>
                                        </div>
                                    </div>
                                    <div class="d-flex align-items-start">
                                        <i class="bi bi-clock text-warning me-3 mt-1"></i>
                                        <div>
                                            <h6 class="mb-1" data-original-text="Business Hours">ساعات العمل</h6>
                                            <p class="text-muted mb-1" data-original-text="Sunday - Thursday">الأحد - الخميس</p>
                                            <small class="text-muted">8:00 AM - 6:00 PM</small>
                                        </div>
                                    </div>
                                </div>
                                <hr>
                                <div class="d-grid">
                                    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#newTicketModal">
                                        <i class="bi bi-headset me-2"></i>
                                        <span data-original-text="Contact Support">تواصل مع الدعم</span>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Quick Resources -->
                        <div class="card mb-4">
                            <div class="card-header">
                                <h5 class="card-title mb-0" data-original-text="Quick Resources">موارد سريعة</h5>
                            </div>
                            <div class="card-body">
                                <div class="list-group list-group-flush">
                                    <a href="#" class="list-group-item list-group-item-action border-0 px-0">
                                        <i class="bi bi-book text-primary me-2"></i>
                                        <span data-original-text="User Manual (PDF)">دليل المستخدم (PDF)</span>
                                    </a>
                                    <a href="#" class="list-group-item list-group-item-action border-0 px-0">
                                        <i class="bi bi-camera-video text-success me-2"></i>
                                        <span data-original-text="Video Tutorials">دروس فيديو</span>
                                    </a>
                                    <a href="#" class="list-group-item list-group-item-action border-0 px-0">
                                        <i class="bi bi-download text-info me-2"></i>
                                        <span data-original-text="Mobile App">تطبيق الهاتف المحمول</span>
                                    </a>
                                    <a href="#" class="list-group-item list-group-item-action border-0 px-0">
                                        <i class="bi bi-chat-square-dots text-warning me-2"></i>
                                        <span data-original-text="Community Forum">منتدى المجتمع</span>
                                    </a>
                                    <a href="#" class="list-group-item list-group-item-action border-0 px-0">
                                        <i class="bi bi-shield-check text-danger me-2"></i>
                                        <span data-original-text="Security Guidelines">إرشادات الأمان</span>
                                    </a>
                                </div>
                            </div>
                        </div>

                        <!-- System Status -->
                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title mb-0" data-original-text="System Status">حالة النظام</h5>
                            </div>
                            <div class="card-body">
                                <div class="d-flex align-items-center mb-2">
                                    <div class="status-dot bg-success me-2"></div>
                                    <span class="fw-semibold" data-original-text="All Systems Operational">جميع الأنظمة تعمل</span>
                                </div>
                                <small class="text-muted" data-original-text="Last updated: 5 minutes ago">آخر تحديث: قبل 5 دقائق</small>
                                
                                <hr class="my-3">
                                
                                <div class="service-status">
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <span data-original-text="Transaction Processing">معالجة المعاملات</span>
                                        <div class="status-dot bg-success"></div>
                                    </div>
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <span data-original-text="Document Upload">رفع المستندات</span>
                                        <div class="status-dot bg-success"></div>
                                    </div>
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <span data-original-text="Notifications">الإشعارات</span>
                                        <div class="status-dot bg-success"></div>
                                    </div>
                                    <div class="d-flex justify-content-between align-items-center">
                                        <span data-original-text="Email Service">خدمة البريد الإلكتروني</span>
                                        <div class="status-dot bg-success"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- New Support Ticket Modal -->
    <div class="modal fade" id="newTicketModal" tabindex="-1" aria-labelledby="newTicketModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="newTicketModalLabel" data-original-text="Create New Support Ticket">إنشاء تذكرة دعم جديدة</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="ticketSubject" class="form-label" data-original-text="Subject">الموضوع</label>
                                    <input type="text" class="form-control" id="ticketSubject" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="ticketPriority" class="form-label" data-original-text="Priority">الأولوية</label>
                                    <select class="form-select" id="ticketPriority" required>
                                        <option value="" data-original-text="Select Priority">اختر الأولوية</option>
                                        <option value="low" data-original-text="Low">منخفض</option>
                                        <option value="medium" data-original-text="Medium">متوسط</option>
                                        <option value="high" data-original-text="High">عالي</option>
                                        <option value="urgent" data-original-text="Urgent">عاجل</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="ticketCategory" class="form-label" data-original-text="Category">الفئة</label>
                            <select class="form-select" id="ticketCategory" required>
                                <option value="" data-original-text="Select Category">اختر الفئة</option>
                                <option value="account" data-original-text="Account & Login">الحساب وتسجيل الدخول</option>
                                <option value="transactions" data-original-text="Transactions">المعاملات</option>
                                <option value="documents" data-original-text="Documents">المستندات</option>
                                <option value="technical" data-original-text="Technical Issues">مشاكل فنية</option>
                                <option value="general" data-original-text="General Inquiry">استفسار عام</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="ticketDescription" class="form-label" data-original-text="Description">الوصف</label>
                            <textarea class="form-control" id="ticketDescription" rows="5" placeholder="Please describe your issue in detail..." data-original-placeholder="Please describe your issue in detail..." required></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="ticketAttachment" class="form-label" data-original-text="Attachment (Optional)">مرفق (اختياري)</label>
                            <input type="file" class="form-control" id="ticketAttachment" multiple>
                            <div class="form-text" data-original-text="You can attach screenshots or documents to help us understand your issue better.">يمكنك إرفاق لقطات شاشة أو مستندات لمساعدتنا في فهم مشكلتك بشكل أفضل.</div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-original-text="Cancel">إلغاء</button>
                    <button type="button" class="btn btn-primary" data-original-text="Submit Ticket">إرسال التذكرة</button>
                </div>
            </div>
        </div>
    </div>

    <!-- View Ticket Modal -->
    <div class="modal fade" id="ticketModal" tabindex="-1" aria-labelledby="ticketModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="ticketModalLabel" data-original-text="Support Ticket #SP-001">تذكرة الدعم #SP-001</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="ticket-details">
                        <div class="row mb-3">
                            <div class="col-sm-6">
                                <strong data-original-text="Status:">الحالة:</strong>
                                <span class="badge bg-warning ms-2" data-original-text="In Progress">قيد المعالجة</span>
                            </div>
                            <div class="col-sm-6">
                                <strong data-original-text="Priority:">الأولوية:</strong>
                                <span class="badge bg-info ms-2" data-original-text="Medium">متوسط</span>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-sm-6">
                                <strong data-original-text="Created:">تم إنشاؤها:</strong>
                                <span class="ms-2">Jan 15, 2024</span>
                            </div>
                            <div class="col-sm-6">
                                <strong data-original-text="Last Updated:">آخر تحديث:</strong>
                                <span class="ms-2">Jan 16, 2024</span>
                            </div>
                        </div>
                        <hr>
                        <div class="ticket-conversation">
                            <h6 data-original-text="Conversation">المحادثة</h6>
                            <div class="message mb-3">
                                <div class="d-flex align-items-start">
                                    <div class="avatar bg-primary text-white rounded-circle me-3 d-flex align-items-center justify-content-center" style="width: 40px; height: 40px;">
                                        A
                                    </div>
                                    <div class="flex-grow-1">
                                        <div class="d-flex align-items-center mb-1">
                                            <strong class="me-2" data-original-text="Ahmed Al-Rashid">أحمد الراشد</strong>
                                            <small class="text-muted">Jan 15, 2024 at 2:30 PM</small>
                                        </div>
                                        <p class="mb-0" data-original-text="I'm having trouble uploading documents to my transaction. The upload button doesn't seem to work.">أواجه مشكلة في رفع المستندات إلى معاملتي. زر الرفع لا يبدو أنه يعمل.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="message mb-3">
                                <div class="d-flex align-items-start">
                                    <div class="avatar bg-success text-white rounded-circle me-3 d-flex align-items-center justify-content-center" style="width: 40px; height: 40px;">
                                        S
                                    </div>
                                    <div class="flex-grow-1">
                                        <div class="d-flex align-items-center mb-1">
                                            <strong class="me-2" data-original-text="Support Team">فريق الدعم</strong>
                                            <small class="text-muted">Jan 16, 2024 at 10:15 AM</small>
                                        </div>
                                        <p class="mb-0" data-original-text="Thank you for contacting us. We're looking into this issue. Can you please try using a different browser and let us know if the problem persists?">شكراً لتواصلك معنا. نحن نبحث في هذه المشكلة. هل يمكنك المحاولة باستخدام متصفح مختلف وإعلامنا إذا استمرت المشكلة؟</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr>
                        <div class="reply-form">
                            <h6 data-original-text="Add Reply">إضافة رد</h6>
                            <div class="mb-3">
                                <textarea class="form-control" rows="3" placeholder="Type your reply here..." data-original-placeholder="Type your reply here..."></textarea>
                            </div>
                            <button class="btn btn-primary" data-original-text="Send Reply">إرسال الرد</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Additional CSS -->
    <style>
        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            display: inline-block;
        }
        .contact-info .bi {
            font-size: 1.2rem;
        }
        .message {
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #007bff;
        }
        .message:nth-child(even) {
            background-color: #e9ecef;
            border-left-color: #28a745;
        }
        .avatar {
            font-size: 16px;
            font-weight: bold;
        }
        .service-status {
            font-size: 0.9rem;
        }
        .search-hero .form-control:focus {
            border-color: #ffffff;
            box-shadow: 0 0 0 0.2rem rgba(255, 255, 255, 0.25);
        }

        /* FAQ Section Styles */
        .card-title[data-original-text="Frequently Asked Questions"] {
            font-size: 1.25rem !important;
            font-weight: 600;
        }

        /* FAQ Accordion Enhancement Styles */
        #faqAccordion .accordion-item {
            margin-bottom: 0.75rem;
            border: 1px solid #dee2e6;
            border-radius: 0.5rem;
            overflow: hidden;
        }

        #faqAccordion .accordion-button {
            font-weight: 500;
            font-size: 1rem;
            padding: 1rem 1.25rem;
        }

        #faqAccordion .accordion-button:not(.collapsed) {
            background-color: #f0f6ff;
            color: #0056b3;
        }

        #faqAccordion .accordion-button:focus {
            box-shadow: none;
            border-color: transparent;
        }

        #faqAccordion .accordion-body {
            padding: 1.25rem;
            background-color: #ffffff;
        }

        #faqAccordion .accordion-body strong {
            display: block;
            margin-bottom: 0.5rem;
            color: #333;
            font-size: 0.95rem;
        }

        #faqAccordion .accordion-body p {
            margin-bottom: 1rem;
            line-height: 1.6;
        }

        #faqAccordion .accordion-body .mb-3:last-child {
            margin-bottom: 0 !important;
        }

        /* RTL Support for FAQ */
        [dir="rtl"] #faqAccordion .accordion-button .bi {
            margin-right: 0;
            margin-left: 0.5rem;
        }
    </style>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JS -->
    <script src="js/translations.js"></script>
    <script src="js/sidebar.js?v=4.0"></script>
    <script src="js/dashboard.js"></script>

    <!-- Support Page JS -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Critical FAQ Accordion Fix
            function initializeFAQAccordion() {
                const accordionElement = document.getElementById('faqAccordion');
                if (!accordionElement) return;

                // Clean up any incorrectly added data-original-text from accordion headers
                const accordionHeaders = accordionElement.querySelectorAll('.accordion-header');
                accordionHeaders.forEach(header => {
                    if (header.dataset.originalText) {
                        delete header.dataset.originalText;
                        header.removeAttribute('data-original-text');
                    }
                });

                // Wait for Bootstrap to be fully loaded
                if (typeof bootstrap === 'undefined' || typeof bootstrap.Collapse === 'undefined') {
                    console.error('Bootstrap not loaded, retrying...');
                    setTimeout(initializeFAQAccordion, 100);
                    return;
                }

                // Preserve the current accordion structure during re-initialization
                const preserveAccordionStructure = () => {
                    const buttons = accordionElement.querySelectorAll('.accordion-button');
                    buttons.forEach(button => {
                        // Ensure the button maintains its structure
                        if (!button.querySelector('i')) {
                            // Re-add icon if missing
                            const icon = document.createElement('i');
                            icon.className = button.id === 'accountHeading' ? 'bi bi-person-circle me-2' :
                                           button.id === 'transactionsHeading' ? 'bi bi-receipt me-2' :
                                           button.id === 'documentsHeading' ? 'bi bi-file-earmark me-2' :
                                           'bi bi-gear me-2';
                            button.insertBefore(icon, button.firstChild);
                        }
                        
                        // Ensure span exists for text
                        let textSpan = button.querySelector('span');
                        if (!textSpan) {
                            textSpan = document.createElement('span');
                            const textNode = Array.from(button.childNodes).find(node => 
                                node.nodeType === Node.TEXT_NODE && node.textContent.trim()
                            );
                            if (textNode) {
                                textSpan.textContent = textNode.textContent;
                                button.replaceChild(textSpan, textNode);
                            }
                        }
                    });
                };

                preserveAccordionStructure();

                // Initialize each collapse section manually
                const collapseElements = accordionElement.querySelectorAll('.accordion-collapse');
                collapseElements.forEach(collapse => {
                    // Dispose existing instance if any
                    const existingInstance = bootstrap.Collapse.getInstance(collapse);
                    if (existingInstance) {
                        existingInstance.dispose();
                    }

                    // Create new Bootstrap Collapse instance
                    new bootstrap.Collapse(collapse, {
                        toggle: false,
                        parent: '#faqAccordion'
                    });
                });

                // Manually handle button clicks to ensure they work
                const accordionButtons = accordionElement.querySelectorAll('.accordion-button');
                accordionButtons.forEach(button => {
                    // Clone and replace to remove old handlers
                    const newButton = button.cloneNode(true);
                    
                    // Preserve the icon and span structure
                    const icon = button.querySelector('i');
                    const span = button.querySelector('span');
                    if (icon) newButton.querySelector('i') || newButton.insertBefore(icon.cloneNode(true), newButton.firstChild);
                    if (span) {
                        const newSpan = newButton.querySelector('span');
                        if (newSpan) {
                            newSpan.textContent = span.textContent;
                            if (span.dataset.originalText) {
                                newSpan.dataset.originalText = span.dataset.originalText;
                            }
                        }
                    }
                    
                    button.parentNode.replaceChild(newButton, button);

                    // Add fresh click handler
                    newButton.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        
                        const targetId = this.getAttribute('data-bs-target');
                        const targetElement = document.querySelector(targetId);
                        
                        if (targetElement) {
                            const bsCollapse = bootstrap.Collapse.getInstance(targetElement) || 
                                              new bootstrap.Collapse(targetElement, {toggle: false});
                            bsCollapse.toggle();

                            // Update button state
                            setTimeout(() => {
                                const isExpanded = targetElement.classList.contains('show');
                                this.classList.toggle('collapsed', !isExpanded);
                                this.setAttribute('aria-expanded', isExpanded);
                            }, 50);
                        }
                    });
                });

                console.log('FAQ Accordion initialized successfully');
            }

            // Initialize accordion after a short delay to ensure everything is loaded
            setTimeout(initializeFAQAccordion, 200);

            // Re-initialize accordion after translations
            const originalApplyTranslations = window.applyTranslations;
            if (originalApplyTranslations) {
                window.applyTranslations = function(lang) {
                    // Apply translations first
                    originalApplyTranslations.call(this, lang);
                    
                    // Fix FAQ section specifically
                    setTimeout(() => {
                        const faqTitle = document.querySelector('.card-title[data-original-text="Frequently Asked Questions"]');
                        const accordionSpans = document.querySelectorAll('#faqAccordion .accordion-button span[data-original-text]');
                        
                        if (lang === 'en') {
                            // Force English text for FAQ elements
                            if (faqTitle) faqTitle.textContent = 'Frequently Asked Questions';
                            
                            accordionSpans.forEach(span => {
                                if (span.dataset.originalText) {
                                    span.textContent = span.dataset.originalText;
                                }
                            });
                        } else {
                            // Force Arabic text for FAQ elements
                            if (faqTitle) faqTitle.textContent = 'الأسئلة الشائعة';
                            
                            accordionSpans.forEach(span => {
                                const arabicText = span.parentElement.querySelector('span').textContent;
                                if (span.dataset.originalText === 'Account & Login') span.textContent = 'الحساب وتسجيل الدخول';
                                else if (span.dataset.originalText === 'Transactions') span.textContent = 'المعاملات';
                                else if (span.dataset.originalText === 'Documents') span.textContent = 'المستندات';
                                else if (span.dataset.originalText === 'Technical Issues') span.textContent = 'المشاكل الفنية';
                            });
                        }
                        
                        // Re-initialize accordion to ensure it works after translation
                        initializeFAQAccordion();
                    }, 150);
                };
            }
            
            // Also listen for language toggle button clicks
            document.addEventListener('click', function(e) {
                if (e.target.closest('.language-toggle .btn')) {
                    setTimeout(initializeFAQAccordion, 300);
                }
            });

            // Search functionality
            const searchInputs = document.querySelectorAll('input[placeholder*="Search"], input[placeholder*="help"]');
            searchInputs.forEach(input => {
                input.addEventListener('input', function() {
                    console.log('Search:', this.value);
                    // Implement search logic here
                });
            });

            // New ticket form submission
            const submitTicketBtn = document.querySelector('#newTicketModal .btn-primary');
            if (submitTicketBtn) {
                submitTicketBtn.addEventListener('click', function() {
                    const subject = document.getElementById('ticketSubject').value;
                    const priority = document.getElementById('ticketPriority').value;
                    const category = document.getElementById('ticketCategory').value;
                    const description = document.getElementById('ticketDescription').value;

                    if (subject && priority && category && description) {
                        // Simulate ticket creation
                        alert('Support ticket created successfully!');
                        bootstrap.Modal.getInstance(document.getElementById('newTicketModal')).hide();
                        
                        // Reset form
                        document.querySelector('#newTicketModal form').reset();
                    } else {
                        alert('Please fill in all required fields.');
                    }
                });
            }

            // Reply form submission
            const sendReplyBtn = document.querySelector('#ticketModal .btn-primary');
            if (sendReplyBtn) {
                sendReplyBtn.addEventListener('click', function() {
                    const replyText = document.querySelector('#ticketModal textarea').value;
                    if (replyText.trim()) {
                        // Simulate sending reply
                        alert('Reply sent successfully!');
                        document.querySelector('#ticketModal textarea').value = '';
                    } else {
                        alert('Please enter a reply.');
                    }
                });
            }

            // FAQ search within accordion
            const faqSearch = document.querySelector('.search-hero input');
            if (faqSearch) {
                faqSearch.addEventListener('input', function() {
                    const searchTerm = this.value.toLowerCase();
                    const accordionItems = document.querySelectorAll('#faqAccordion .accordion-item');
                    
                    accordionItems.forEach(item => {
                        const text = item.textContent.toLowerCase();
                        if (searchTerm === '' || text.includes(searchTerm)) {
                            item.style.display = 'block';
                        } else {
                            item.style.display = 'none';
                        }
                    });
                });
            }

            // Quick link anchors
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
        });
    </script>
</body>
</html>